import InputError from '@/components/input-error';
import TextLink from '@/components/text-link';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Checkbox } from '@/components/ui/checkbox';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Separator } from '@/components/ui/separator';
import AuthLayout from '@/layouts/auth-layout';
import { SharedData } from '@/types';
import { Form } from '@inertiajs/react';
import { LoaderCircle } from 'lucide-react';

interface LoginProps extends SharedData {
    status?: string;
    canResetPassword: boolean;
    digikopUrl: string;
}

export default function Login({ status, canResetPassword, digikopUrl }: LoginProps) {
    return (
        <AuthLayout title="" description="">
            <Card className="border border-border bg-card">
                <CardHeader className="text-center">
                    <CardTitle className="text-xl text-foreground">Welcome back</CardTitle>
                    <CardDescription className="text-muted-foreground">Login with your Digi Koperasi Account</CardDescription>
                </CardHeader>
                <CardContent>
                    <div className="grid gap-6">
                        <Button
                            variant="outline"
                            asChild
                            className="w-full border-border bg-primary text-foreground hover:bg-primary/90 hover:text-accent-foreground"
                        >
                            <a href={digikopUrl} target="_blank" className="cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" width="778" height="778" viewBox="0 0 778 778" version="1.1">
                                    <path
                                        d="M 553.715 197.040 C 541.413 199.108, 527.036 209.842, 520.719 221.675 C 514.124 234.030, 512.195 252.624, 515.975 267.404 C 518.732 278.180, 523.350 286.394, 530.973 294.079 C 539.536 302.710, 547.937 306.905, 559.544 308.343 C 589.837 312.096, 613.579 294.971, 619.571 265.046 C 625.617 234.851, 608.890 204.416, 582.465 197.533 C 576.216 195.905, 561.921 195.660, 553.715 197.040 M 372.500 288.997 C 369.750 289.408, 365.250 290.049, 362.500 290.422 C 345.095 292.782, 318.804 302.672, 302.124 313.135 C 286.016 323.239, 270.006 337.935, 259.787 352 C 248.927 366.945, 240.229 380.644, 237.245 387.500 C 221.683 423.254, 219.747 469.955, 232.208 509 C 236.301 521.825, 239.662 528.264, 249.958 543 C 266.158 566.189, 266.826 568.091, 267.669 593.500 C 268.454 617.150, 267.553 622.860, 261.558 632.230 C 257.716 638.234, 257 640.134, 257 644.317 C 257 656.635, 268.511 667.989, 281 667.989 C 287.864 667.989, 292.309 666.003, 297.611 660.569 C 301.577 656.503, 303.002 654.161, 303.974 650.108 C 305.598 643.339, 304.834 639.924, 300.043 632.545 C 293.436 622.369, 293.485 622.629, 293.972 600 C 294.215 588.725, 294.418 572.525, 294.424 564 C 294.435 545.924, 294.355 545.668, 283.234 528.348 C 274.279 514.401, 271.906 509.605, 268.221 498 C 258.005 465.830, 260.031 437.213, 274.980 402.533 C 277.596 396.465, 280.572 389.255, 281.595 386.511 C 283.645 381.010, 287.522 376.785, 301.792 364.502 C 331.595 338.847, 361.235 326.907, 395.247 326.856 C 432.748 326.800, 465.536 342.515, 489.181 371.878 C 495.857 380.168, 509.375 406.268, 514.897 421.529 C 523.006 443.938, 524.053 465.549, 518.127 488.187 C 514.112 503.525, 511.490 509.770, 502.398 525.646 C 493.367 541.417, 489.998 551.107, 490.006 561.288 C 490.012 569.458, 491.468 575.858, 493.497 576.637 C 496.023 577.607, 520.037 560.159, 526.978 552.310 C 540.545 536.969, 550.660 515.171, 555.675 490.464 C 557.128 483.307, 557.495 476.764, 557.497 458 C 557.500 432.039, 556.076 421.626, 549.871 402.256 C 542.355 378.793, 525.596 350.603, 509.575 334.475 C 479.022 303.720, 438.727 287.769, 392.500 288.132 C 384.250 288.197, 375.250 288.586, 372.500 288.997"
                                        stroke="none"
                                        fill="#dc1c24"
                                        fillRule="evenodd"
                                    />
                                    <path
                                        d="M 360.500 20.112 C 260.815 27.633, 167.409 77.630, 103.185 157.845 C 30.753 248.311, 3.974 365.946, 29.570 481.223 C 35.974 510.067, 43.078 530.750, 55.424 556.500 C 101.763 653.147, 185.311 729.372, 262.045 745.009 C 278.834 748.431, 299.812 747.423, 314.500 742.491 C 345.010 732.245, 366.195 705.595, 370.938 671.494 C 373.450 653.431, 374.283 617.542, 373.071 579.539 C 370.754 506.867, 370.232 478.235, 370.883 459.500 C 371.360 445.786, 371.213 439.665, 370.355 437.500 C 369.676 435.785, 354.341 419.994, 334.564 400.644 L 299.961 366.787 294.339 371.124 C 286.566 377.121, 284.088 380.524, 279.699 391.229 C 274.945 402.826, 274.490 404.156, 276.408 400.865 L 277.943 398.230 301.469 421.865 C 314.407 434.864, 326.795 447.908, 328.997 450.850 L 333 456.201 333 562.505 L 333 668.808 330.605 675.887 C 325.687 690.424, 317.938 699.945, 306.369 705.662 C 299.965 708.827, 297.894 709.337, 289.677 709.766 C 272.843 710.647, 256.667 706.290, 233.742 694.701 C 206.061 680.707, 181.171 662.216, 155.441 636.531 C 100.737 581.921, 69.215 517.603, 59.366 440.500 C 56.906 421.245, 56.898 382.128, 59.350 362 C 70.843 267.628, 116.575 184.225, 188.500 126.465 C 198.370 118.538, 221.674 103.153, 233.500 96.755 C 301.639 59.892, 377.492 49.450, 460.106 65.558 C 510.628 75.409, 559.619 97.771, 599 128.956 C 612.327 139.509, 636.207 163.406, 646.907 176.898 C 687.545 228.137, 712.147 290.022, 719.497 359.500 C 721.463 378.076, 721.452 416.755, 719.476 435.570 C 708.846 536.797, 660.139 622.950, 584 675.201 C 549.658 698.768, 505.831 717.014, 469.345 722.932 C 462.830 723.988, 451.561 725.803, 444.303 726.965 C 428.588 729.479, 421.565 731.435, 418.984 734.016 C 414.028 738.972, 412.734 754.445, 416.812 759.986 C 422.854 768.194, 444.868 767.694, 482.783 758.488 C 535.727 745.631, 584.523 721.824, 626.500 688.370 C 640.571 677.155, 667.064 650.677, 678.397 636.500 C 722.658 581.131, 749.448 515.530, 758.641 440 C 760.800 422.261, 761.130 374.611, 759.216 357 C 749.370 266.431, 712.951 187.891, 653.021 127.985 C 615.390 90.368, 572.500 63.146, 519.853 43.466 C 468.884 24.412, 412.680 16.175, 360.500 20.112 M 380.193 114.010 C 356.093 117.377, 339.120 129.586, 329.466 150.500 C 324.353 161.578, 322.667 169.818, 322.715 183.500 C 322.805 209.270, 333.106 230.569, 351.396 242.802 C 363.685 251.021, 379.229 254.795, 396 253.630 C 423.861 251.695, 444.343 237.059, 454.259 212 C 458.268 201.868, 459.322 194.457, 458.774 180.239 C 458.376 169.883, 457.776 166.003, 455.569 159.500 C 447.781 136.558, 431.903 121.377, 409.629 115.576 C 402.133 113.623, 388.250 112.885, 380.193 114.010 M 197.124 195.578 C 163.834 204.531, 147.556 243.386, 163.284 276.350 C 175.027 300.961, 199.768 311.581, 228.500 304.343 C 246.862 299.718, 260.731 285.392, 265.604 266.019 C 268.027 256.385, 267.158 239.872, 263.715 230.119 C 257.604 212.810, 244.950 200.554, 228.068 195.595 C 221.241 193.590, 204.549 193.580, 197.124 195.578 M 513.349 251 C 513.349 255.675, 513.522 257.587, 513.732 255.250 C 513.943 252.912, 513.943 249.088, 513.732 246.750 C 513.522 244.412, 513.349 246.325, 513.349 251 M 272.469 336.250 L 266.500 342.500 272.750 336.531 C 278.556 330.987, 279.458 330, 278.719 330 C 278.564 330, 275.751 332.813, 272.469 336.250 M 194.450 336.461 C 183.169 338.510, 176.118 340.867, 166.500 345.802 C 159.225 349.535, 155.662 352.249, 147.912 359.960 C 132.817 374.978, 124.866 388.837, 119.243 409.926 C 116.968 418.457, 116.680 421.515, 116.595 438 C 116.488 458.860, 117.868 468.647, 123.599 487.684 C 132.616 517.631, 148.752 545.851, 177.529 582 C 197.766 607.421, 205.819 613.304, 217.906 611.491 C 228.077 609.966, 235.979 595.656, 232.084 585.815 C 231.580 584.542, 223.450 574.725, 214.018 564 C 179.838 525.137, 168.611 507.402, 160.531 479.513 C 156.491 465.568, 154.999 454.931, 155.007 440.119 C 155.025 405.919, 167.940 384.884, 193.500 377.427 C 201.912 374.972, 217.725 375.176, 229.953 377.897 C 235.152 379.054, 239.696 380, 240.051 380 C 240.405 380, 243.760 375.387, 247.507 369.750 C 251.253 364.113, 256.706 356.264, 259.623 352.308 L 264.928 345.117 259.631 343.135 C 239.593 335.638, 213.621 332.979, 194.450 336.461 M 542.965 336.880 C 538.270 337.905, 531.224 340.090, 527.306 341.736 L 520.183 344.729 517.410 342.114 C 515.292 340.118, 515.428 340.440, 517.987 343.478 C 522.039 348.287, 529.908 360.449, 536.459 372.026 L 541.284 380.552 548.392 378.144 C 557.985 374.895, 575.689 374.030, 584.793 376.366 C 595.129 379.018, 601.917 382.880, 609.600 390.478 C 617.342 398.135, 622.331 406.999, 625.654 419 C 628.556 429.483, 628.123 454.188, 624.786 468.500 C 616.380 504.550, 596.678 537.491, 564.061 570.027 C 540.566 593.464, 515.530 611.621, 487.800 625.338 C 475.872 631.238, 454.121 640, 451.403 640 C 451.181 640, 451 597.986, 451 546.637 L 451 453.273 472.387 432.387 C 484.150 420.899, 495.906 408.575, 498.510 405 C 501.114 401.425, 503.645 398.614, 504.134 398.754 C 504.622 398.893, 502.792 394.563, 500.066 389.131 C 494.808 378.653, 486.607 367.724, 477.833 359.502 C 472.615 354.612, 472.629 354.640, 478.500 360.829 L 484.500 367.154 448.733 402.552 L 412.966 437.950 413.233 550.725 L 413.500 663.500 415.721 667.653 C 426.408 687.638, 457.372 684.855, 506.766 659.470 C 535.714 644.592, 559.578 626.633, 587.005 599.086 C 628.032 557.879, 652.177 517.694, 662.647 473.188 C 666.037 458.778, 667.022 431.082, 664.632 417.364 C 658.428 381.765, 641.808 359.090, 611.512 344.893 C 596.907 338.049, 586.878 335.863, 568 335.412 C 554.547 335.090, 549.924 335.361, 542.965 336.880 M 224.272 438 C 224.272 440.475, 224.467 441.488, 224.706 440.250 C 224.944 439.012, 224.944 436.988, 224.706 435.750 C 224.467 434.512, 224.272 435.525, 224.272 438 M 558.405 458.500 C 558.406 467.300, 558.559 470.766, 558.745 466.203 C 558.930 461.639, 558.929 454.439, 558.742 450.203 C 558.555 445.966, 558.404 449.700, 558.405 458.500 M 262.286 449.500 C 262.294 452.250, 262.488 453.256, 262.718 451.736 C 262.947 450.216, 262.941 447.966, 262.704 446.736 C 262.467 445.506, 262.279 446.750, 262.286 449.500 M 223.343 455.500 C 223.346 459.900, 223.522 461.576, 223.733 459.224 C 223.945 456.872, 223.942 453.272, 223.727 451.224 C 223.512 449.176, 223.339 451.100, 223.343 455.500 M 521.382 459.500 C 521.384 466.100, 521.546 468.670, 521.741 465.211 C 521.937 461.752, 521.936 456.352, 521.738 453.211 C 521.540 450.070, 521.380 452.900, 521.382 459.500 M 262.272 468 C 262.272 470.475, 262.467 471.488, 262.706 470.250 C 262.944 469.012, 262.944 466.988, 262.706 465.750 C 262.467 464.512, 262.272 465.525, 262.272 468 M 508.208 513.532 C 506.454 517.089, 505.233 520, 505.495 520 C 506.165 520, 512.211 507.878, 511.764 507.431 C 511.563 507.229, 509.962 509.975, 508.208 513.532 M 489.328 561.500 C 489.333 565.350, 489.513 566.802, 489.730 564.728 C 489.946 562.653, 489.943 559.503, 489.722 557.728 C 489.501 555.952, 489.324 557.650, 489.328 561.500 M 295.328 564.500 C 295.333 568.350, 295.513 569.802, 295.730 567.728 C 295.946 565.653, 295.943 562.503, 295.722 560.728 C 295.501 558.952, 295.324 560.650, 295.328 564.500 M 294.300 584 C 294.300 587.025, 294.487 588.263, 294.716 586.750 C 294.945 585.237, 294.945 582.763, 294.716 581.250 C 294.487 579.737, 294.300 580.975, 294.300 584 M 267.402 601 C 267.402 609.525, 267.556 613.013, 267.743 608.750 C 267.931 604.487, 267.931 597.513, 267.743 593.250 C 267.556 588.987, 267.402 592.475, 267.402 601 M 293.370 605 C 293.370 610.775, 293.535 613.138, 293.737 610.250 C 293.939 607.362, 293.939 602.638, 293.737 599.750 C 293.535 596.862, 293.370 599.225, 293.370 605 M 256.286 644.500 C 256.294 647.250, 256.488 648.256, 256.718 646.736 C 256.947 645.216, 256.941 642.966, 256.704 641.736 C 256.467 640.506, 256.279 641.750, 256.286 644.500 M 298.564 659.783 C 295.039 664.008, 294.969 664.187, 297.900 661.500 C 300.676 658.954, 303.720 654.925, 302.785 655.033 C 302.628 655.051, 300.729 657.188, 298.564 659.783"
                                        stroke="none"
                                        fill="#241c23"
                                        fillRule="evenodd"
                                    />
                                </svg>
                                Login via Digi Koperasi
                            </a>
                        </Button>
                        <div className="relative flex items-center py-1">
                            <Separator />
                            <div className="absolute left-1/2 -translate-x-1/2 bg-card px-4 text-sm text-muted-foreground">or</div>
                        </div>
                        <Form method="post" action={route('login')} resetOnSuccess={['password']} className="flex flex-col gap-6">
                            {({ processing, errors }) => (
                                <>
                                    <div className="grid gap-6">
                                        <div className="grid gap-2">
                                            <Label htmlFor="email" className="text-foreground">
                                                Email address
                                            </Label>
                                            <Input
                                                id="email"
                                                type="email"
                                                name="email"
                                                required
                                                autoFocus
                                                tabIndex={1}
                                                autoComplete="email"
                                                placeholder="email@example.com"
                                                className="border-border bg-background text-foreground placeholder:text-muted-foreground"
                                            />
                                            <InputError message={errors.email} />
                                        </div>

                                        <div className="grid gap-2">
                                            <div className="flex items-center">
                                                <Label htmlFor="password" className="text-foreground">
                                                    Password
                                                </Label>
                                                {canResetPassword && (
                                                    <TextLink
                                                        href={route('password.request')}
                                                        className="ml-auto text-sm text-foreground"
                                                        tabIndex={5}
                                                    >
                                                        Forgot password?
                                                    </TextLink>
                                                )}
                                            </div>
                                            <Input
                                                id="password"
                                                type="password"
                                                name="password"
                                                required
                                                tabIndex={2}
                                                autoComplete="current-password"
                                                placeholder="Password"
                                                className="border-border bg-background text-foreground placeholder:text-muted-foreground"
                                            />
                                            <InputError message={errors.password} />
                                        </div>

                                        <div className="flex items-center space-x-3">
                                            <Checkbox id="remember" name="remember" tabIndex={3} />
                                            <Label htmlFor="remember" className="text-foreground">
                                                Remember me
                                            </Label>
                                        </div>

                                        <Button
                                            type="submit"
                                            className="mt-4 w-full bg-primary text-primary-foreground hover:bg-primary/90"
                                            tabIndex={4}
                                            disabled={processing}
                                        >
                                            {processing && <LoaderCircle className="h-4 w-4 animate-spin" />}
                                            Log in
                                        </Button>
                                    </div>
                                </>
                            )}
                        </Form>
                    </div>
                </CardContent>
            </Card>

            {status && <div className="mb-4 text-center text-sm font-medium text-green-600 dark:text-green-400">{status}</div>}
        </AuthLayout>
    );
}
